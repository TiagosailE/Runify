<div class="min-h-screen bg-[#F5F5F5] pb-24">
  
  <header class="bg-white shadow-sm sticky top-0 z-10">
    <div class="flex items-center justify-between px-6 py-4">
      <button class="text-gray-700">
        <i class="fas fa-bars text-xl"></i>
      </button>
      <h1 class="text-2xl font-bold">
        Runi<span class="text-teal-500">fy</span>
      </h1>
      <div class="w-6"></div>
    </div>
  </header>

  <main class="px-6 py-8 space-y-6">
    
    <div class="flex flex-col items-center">
      <div class="w-32 h-32 rounded-full overflow-hidden mb-4 border-4 border-white shadow-lg">
        <img src="https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=400&q=80" 
             alt="Profile" 
             class="w-full h-full object-cover">
      </div>
      <h2 class="text-xl font-bold text-gray-900">
        <%= current_user.username || "Usuário" %>
      </h2>
      <p class="text-sm text-gray-500">
        <%= current_user.email %>
      </p>
    </div>

    <%= form_with url: profile_update_path, method: :patch, local: true, class: "space-y-4" do |f| %>
      
      <div>
        <div class="relative">
          <%= f.text_field :username, 
              value: current_user.username,
              placeholder: "Digite seu nome",
              class: "appearance-none block w-full px-4 py-4 border border-gray-300 placeholder-gray-400 text-gray-900 rounded-2xl focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent text-base bg-white" %>
        </div>
      </div>

      <div>
        <div class="relative">
          <%= f.number_field :age, 
              value: current_user.birth_date ? ((Date.today - current_user.birth_date) / 365).to_i : nil,
              placeholder: "Digite sua idade",
              class: "appearance-none block w-full px-4 py-4 border border-gray-300 placeholder-gray-400 text-gray-900 rounded-2xl focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent text-base bg-white" %>
        </div>
      </div>

      <div>
        <div class="relative">
          <%= f.number_field :weight, 
              value: current_user.weight,
              step: 0.1,
              placeholder: "Digite seu peso (kg)",
              class: "appearance-none block w-full px-4 py-4 border border-gray-300 placeholder-gray-400 text-gray-900 rounded-2xl focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent text-base bg-white" %>
        </div>
      </div>

      <div>
        <div class="relative">
          <%= f.text_area :goal, 
              value: current_user.goal,
              rows: 4,
              placeholder: "Digite seu objetivo (ex: correr 10km em 50 minutos)",
              class: "appearance-none block w-full px-4 py-4 border border-gray-300 placeholder-gray-400 text-gray-900 rounded-2xl focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent text-base resize-none bg-white" %>
        </div>
      </div>

      <div class="pt-2">
        <%= f.submit "Editar perfil", 
            class: "w-full flex justify-center py-5 px-4 border border-transparent text-base font-semibold rounded-2xl text-white bg-teal-500 hover:bg-teal-600 focus:outline-none transition-all duration-200 shadow-lg cursor-pointer" %>
      </div>

    <% end %>

    <% if current_user.strava_connected? %>
      <div class="bg-teal-50 border border-teal-200 rounded-2xl p-4 flex items-center justify-between">
        <div class="flex items-center gap-3">
          <i class="fab fa-strava text-2xl text-orange-500"></i>
          <div>
            <p class="font-semibold text-gray-900">Strava Conectado</p>
            <p class="text-xs text-gray-600">Última sincronização: <%= current_user.strava_integration.last_sync_at&.strftime('%d/%m/%Y %H:%M') || 'Nunca' %></p>
          </div>
        </div>
        <%= button_to strava_disconnect_path, method: :delete, class: "text-sm text-red-500 hover:text-red-700 font-medium" do %>
          Desconectar
        <% end %>
      </div>
    <% else %>
      <div class="bg-orange-50 border border-orange-200 rounded-2xl p-4">
        <%= link_to strava_connect_path, class: "flex items-center justify-center gap-2 text-orange-500 font-semibold" do %>
          <i class="fab fa-strava text-xl"></i>
          Conectar Strava
        <% end %>
      </div>
    <% end %>

    <div class="pt-4">
      <%= button_to "Sair", destroy_user_session_path, method: :delete, 
          class: "w-full flex justify-center py-4 px-4 border-2 border-red-500 text-base font-semibold rounded-2xl text-red-500 hover:bg-red-50 focus:outline-none transition-all duration-200 cursor-pointer" %>
    </div>

  </main>

  <%= render 'shared/footer' %>

</div>